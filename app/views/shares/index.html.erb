<main class="content-wrapper">
  <h1>My albums</h1>
  <div>
    <ul>
      <% @my_albums.each do |album|  %>
        <li id="album-<%= album.id  %>"class="mt-6">
          <%= form_with(url: new_share_path, method: :get, local: true) do |form|  %>
            <div class="row">
              <h2 class="mr-3">Title:  </h2> <div class="mr-5"> <%= album.title  %> </div>
              <%# <p class="mr-5"> Share with additional people </p> %>
              <%= hidden_field_tag("album_id", album.id)  %>
              <%= form.submit("Share album", class: "btn btn--primary")  %>
            </div>
          <% end %>

          <% if album.shares.count > 0  %>
            <div class="row mt-3">
              <h3 class="mr-5">Shared with:</h3>
              <div class="column">
                <% album.shares.each do |share|  %>
                  <p class="mr-3 mt-4"><%= share.user.email  %> </p>
                <% end %>
              </div>
            </div>
          <% end %>
          <hr class="mt-6">
        </li>
      <% end %>
    </ul>
  </div>

  <div class="mt-5">
    <h1>Albums shared with me</h1>

    <ul>
      <% @shares.each do |share|  %>
        <li id="share-<%= share.album.id  %>"class="row mt-6 ">
          <p class="mr-3"> <%= share.album.title  %> </p>
          <%= link_to("View", album_path(share.album), class: "btn btn--primary mr-1")  %>

          <%= link_to "See on map", maps_path(
          locale: I18n.locale,
          params: { "album[#{share.album.id}]" => "1" }) ,
          class: "btn btn--primary btn__inline mr-1" ,
          data: {turbolinks: 'false'} %>

        <%= link_to 'Remove', share_path(share), method: :delete, class: "btn btn--warning no-radius mr-1", data: { confirm: 'Are you sure?', remote: true } %>
        </li>
      <% end %>
    </ul>
  </div>
</main>
