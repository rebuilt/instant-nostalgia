<div id="modal" class="modal" data-controller="modal">
</div>

<div class="content-wrapper">
  <div class="album-nav row">
    <%= link_to "To Albums", albums_path , class: "btn btn--primary  "  %>
    <%= link_to "To Shares", shares_path , class: "btn btn--primary  "  %>
    <%= link_to "See on map", maps_path(locale: I18n.locale,
                                        params: { "album[#{@album.id}]" => "1" }) ,
    class: "btn btn--primary  " ,
    data: {turbolinks: 'false'} %>
  <%= link_to(@public_status, album_toggle_public_path(@album), id: "public-status-button", remote: true, method: :post,  class: "btn btn--secondary mr-6 ") %>
  <div id="output" class="delta">
    <% if(@album.public)  %>
      Public Album
    <% else  %>
      Private Album
    <% end %>
  </div>
  </div>


  <h1 class="mt-3">Title: <span> <%= @album.title  %> </span> </h1>
  <%# <%= @album.inspect  %1> %>
  <div class="photos">
    <div class="gallery">
      <% @album.photos.each do |photo|   %>
        <div id="id-<%= photo.id  %>" class="photo-deletable">
          <div data-controller="modal"
               data-modal-id="<%= photo.id  %>"
               data-modal-url="<%= url_for(photo.image)  %>"
               data-action="click->modal#showModal">
               <%= image_tag(photo.image.variant(resize: '300x300')) if photo.image.attached? %>
          </div>
          <div class="row">
            <%= link_to "Show details", photo_path(photo), class: "btn btn--primary " %>
            <% if current_user == @album.user  %>
              <%= link_to "Remove", photo_album_path([@album, photo]), class: "btn btn--warning" , method: :delete, data: {confirm: 'Are you sure you want to remove this photo from the album?'}, remote: true %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
