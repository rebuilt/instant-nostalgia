<div id="modal" class="modal" data-controller="modal"> </div>

<main class="content-wrapper">
  <p id="notice"><%= notice %></p>

  <h1>Albums</h1>

  <div class="row">

    <%= form_with(model: @album, class: "mr-3") do |form| %>
      <% if @album.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@album.errors.count, "error") %> prohibited this album from being saved:</h2>

          <ul>
            <% @album.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="row">
        <h3 class="input-group">
          <%= form.label :title, class: "input-group__label m-0 mr-3" %>
        </h3>
        <div class="input-group ">
          <%= form.text_field :title , class: "input-group__field m-0 mr-6"%>
        </div>

        <div class="input-group">
          <%= form.submit class: "btn btn--primary"%>
        </div>
      </div>
    <% end %>

    <ul id="albumList" >
      <% @albums.each do |album| %>
        <li id="album-<%= album.id  %>" class="row end mt-2">
          <h3><%= link_to album.title, album, class: "btn mr-1" %></h3>
          <%= render(partial: "show_album_btn", locals: {album: album})  %>
          <%= link_to 'Share with a user', new_share_path(album_id: album.id),  class: 'btn btn--primary no-radius mr-1' %>
          <%= link_to 'Remove album', album, method: :delete, class: "btn btn--warning no-radius mr-1", data: { confirm: 'Are you sure?', remote: true } %>
        </li>
      <% end %>
    </ul>
  </div>

  <div class="photos mt-5 pt-5">
    <h2 class="mb-5">Your Photos</h2>

    <%= form_with(url: photo_album_path(1), method: :patch, local: true) do |form| %>
      <div class="actions row">
        <p class="mr-4"> Select an album  </p>
        <div class="mr-5">
          <%= select_tag("album-selector", options_from_collection_for_select(current_user.albums, "id", "title" ))  %>
        </div>
        <%= form.submit("Add to album", class: "btn btn--primary ml-5") %>
      </div>

      <div class="gallery mt-5">
        <% @photos.each do |photo|   %>
          <%= render(partial: "photo_selector_card", locals: {photo: photo})  %>
        <% end %>
      </div>

    <% end %>
  </div>
</main>
